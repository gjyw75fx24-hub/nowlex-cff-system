{% load i18n admin_urls %}
{% load static %}
<div class="js-inline-admin-formset inline-group" id="{{ inline_admin_formset.formset.prefix }}-group"
     data-inline-type="tabular"
     data-inline-formset="{{ inline_admin_formset.formset.opts.inline_formset_data }}">
  <div class="tabular inline-related {% if forloop.last %}last-related{% endif %}">
    {{ inline_admin_formset.management_form }}
    <fieldset class="module {{ inline_admin_formset.classes }}" id="{{ inline_admin_formset.formset.prefix }}-fieldset"
              aria-labelledby="{{ inline_admin_formset.formset.prefix }}-fieldset-heading">
      {% if inline_admin_formset.formset.prefix %}<h2 id="{{ inline_admin_formset.formset.prefix }}-heading" class="inline-heading">{% if inline_admin_formset.opts.verbose_name_plural %}{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}{% else %}{{ inline_admin_formset.opts.verbose_name|capfirst }}{% endif %}</h2>{% endif %}
      {{ inline_admin_formset.formset.non_form_errors }}
      <table>
        <thead><tr>
          <th class="original"></th>
        {% for field in inline_admin_formset.formset.empty_form.visible_fields %}
          <th class="column-{{ field.name }}{% if field.field.required %} required{% endif %}">{{ field.label|capfirst }}
          {% if field.field.help_text %}<img src="{% static "admin/img/icon-unknown.svg" %}" class="help help-tooltip" width="10" height="10" alt="Help" title="{{ field.field.help_text|escape }}">{% endif %}
          </th>
        {% endfor %}
        {% if inline_admin_formset.formset.can_delete %}<th>{% trans "Delete?" %}</th>{% endif %}
        </tr></thead>

        <tbody>
        {% for inline_admin_form in inline_admin_formset %}
           {% if inline_admin_form.original or inline_admin_form.show_url %}
            <tr class="form-row has_original {% if inline_admin_form.form.non_field_errors %}errors{% endif %}{% if inline_admin_form.form.errors %} errors{% endif %}{% if inline_admin_form.deleted %} deleted{% endif %}" id="{{ inline_admin_form.form.prefix }}">
           {% else %}
            <tr class="form-row {% if inline_admin_form.form.non_field_errors %}errors{% endif %}{% if inline_admin_form.form.errors %} errors{% endif %}{% if inline_admin_form.deleted %} deleted{% endif %}" id="{{ inline_admin_form.form.prefix }}">
           {% endif %}
            <td class="original">
              {% if inline_admin_form.original %}{{ inline_admin_form.original }}{% endif %}
              {% if inline_admin_form.show_url %}<a href="{{ inline_admin_form.absolute_url }}">{% trans "View on site" %}</a>{% endif %}
              </p>{% endif %}
              {% if inline_admin_form.form.id %}{{ inline_admin_form.form.id }}{% endif %}
              {{ inline_admin_form.pk_field.field }}
              {{ inline_admin_form.fk_field.field }}
              {% if inline_admin_form.form.non_field_errors %}<ul class="errorlist">{% for error in inline_admin_form.form.non_field_errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
            </td>
            {% for fieldset in inline_admin_form %}
              {% for line in fieldset %}
                {% for field in line %}
                  {% if field.is_hidden %} {{ field.field }} {% else %}
                  <td class="field-{{ field.field.name }}{% if field.field.errors %} errors{% endif %}{% if field.field.is_hidden %} hidden{% endif %}">
                    {% if field.field.errors %}<ul class="errorlist">{% for error in field.field.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
                    {{ field.field }}
                    {% if field.field.help_text %}<p class="help">{{ field.field.help_text|safe }}</p>{% endif %}
                  </td>
                  {% endif %}
                {% endfor %}
              {% endfor %}
            {% endfor %}
            {% if inline_admin_formset.formset.can_delete %}
              <td class="delete">
                {% if inline_admin_form.original_content_type_id %}
                  {# Render the hidden checkbox and a visual "x" #}
                  <label for="{{ inline_admin_form.deletion_field.field.id }}" class="inline-deletelink">X</label>
                  {{ inline_admin_form.deletion_field.field }}
                {% endif %}
              </td>
            {% endif %}
            </tr>
        {% endfor %}
        <tr class="add-row"><td colspan="{{ inline_admin_formset.formset.empty_form.visible_fields|length|add:1 }}{% if inline_admin_formset.formset.can_delete %}1{% endif %}"><a role="button" class="addlink" href="#">{% blocktrans with inline_admin_formset.opts.verbose_name as verbose_name %}Adicionar outro {{ verbose_name }}{% endblocktrans %}</a></td></tr>
        </tbody>
      </table>
    </fieldset>
  </div>
</div>